type: custom:vertical-style-card
title: Brontosaurus
style:
  font_size: 24px
  border: true
cards:
- type: vertical-stack
  cards:
  - type: horizontal-stack
    cards:
    - type: picture
      image: /local/divider.png
  - type: horizontal-stack
    cards:
    - type: "custom:button-card"
      color_type: icon
      show_name: false
      entity: sensor.power_brontosaurus
      tap_action:
        action: call-service
        service: script.brontosaurus_action_power
      state:
      - value: 'off'
        color: var(--icon-color-amber)
        icon: mdi:power
      - value: 'on'
        color: var(--icon-color-red)
        icon: mdi:power
    - type: "custom:button-card"
      color_type: icon
      show_name: false
      entity: sensor.power_brontosaurus
      tap_action:
        action: call-service
        service: script.brontosaurus_action_suspend
      state:
      - value: 'off'
        color: var(--icon-off-color)
        icon: mdi:power-sleep
      - value: 'on'
        color: var(--icon-color-amber)
        icon: mdi:power-sleep
    - type: "custom:button-card"
      name: Reboot
      show_name: false
      show_label: false
      color_type: icon
      entity: sensor.power_brontosaurus
      tap_action:
        action: call-service
        service: script.brontosaurus_action_reboot
      styles:
        card:
        - font-size: 10px
        - text-transform: capitalize
      state:
      - value: 'off'
        color: var(--icon-off-color)
        icon: mdi:restart
      - value: 'on'
        color: var(--icon-color-amber)
        icon: mdi:restart
    - type: "custom:button-card"
      color_type: icon
      show_name: false
      entity: sensor.brontosaurus_current_username
      tap_action:
        action: call-service
        service: script.iotlink_brontosaurus_lock
      state:
      - value: 'Laurens'
        color: var(--icon-color-green)
        icon: mdi:lock-open
      - value: 'laurensvda'
        color: var(--icon-color-green)
        icon: mdi:lock-open
      - value: 'SYSTEM'
        color: var(--icon-color-red)
        icon: mdi:lock
      - value: 'unknown'
        color: var(--icon-color-red)
        icon: mdi:lock
      - value: 'off'
        color: var(--icon-off-color)
        icon: mdi:lock
    - type: "custom:button-card"
      color_type: icon
      show_name: false
      entity: sensor.power_brontosaurus
      tap_action:
        action: call-service
        service: script.iotlink_brontosaurus_refresh
      state:
      - value: 'off'
        color: var(--icon-off-color)
        icon: mdi:database-refresh
      - value: 'on'
        color: var(--icon-color-amber)
        icon: mdi:database-refresh
  - type: horizontal-stack
    cards:
    - type: picture
      image: /local/divider.png
  - type: custom:state-switch
    entity: sensor.brontosaurus_pending
    states:
      "shutdown":
        type: vertical-stack
        cards:
        - type: horizontal-stack
          cards:
          - type: "custom:button-card"
            color_type: icon
            show_name: false
            icon: mdi:checkbox-marked-circle
            entity: sensor.power_brontosaurus
            color: var(--icon-color-green)
            tap_action:
              action: call-service
              service: script.brontosaurus_action_confirm
          - type: "custom:doublevalue-card"
            entity: sensor.brontosaurus_pending_count
            title_entity: sensor.brontosaurus_pending
            scale: 20px
          - type: "custom:button-card"
            color_type: icon
            show_name: false
            icon: mdi:cancel
            entity: sensor.power_brontosaurus
            color: var(--icon-color-red)
            tap_action:
              action: call-service
              service: script.brontosaurus_action_cancel
        - type: horizontal-stack
          cards:
          - type: picture
            image: /local/divider.png
      "reboot":
        type: vertical-stack
        cards:
        - type: horizontal-stack
          cards:
          - type: "custom:button-card"
            color_type: icon
            show_name: false
            icon: mdi:checkbox-marked-circle
            entity: sensor.power_brontosaurus
            color: var(--icon-color-green)
            tap_action:
              action: call-service
              service: script.brontosaurus_action_confirm
          - type: "custom:doublevalue-card"
            entity: sensor.brontosaurus_pending_count
            title_entity: sensor.brontosaurus_pending
            scale: 20px
          - type: "custom:button-card"
            color_type: icon
            show_name: false
            icon: mdi:cancel
            entity: sensor.power_brontosaurus
            color: var(--icon-color-red)
            tap_action:
              action: call-service
              service: script.brontosaurus_action_cancel
        - type: horizontal-stack
          cards:
          - type: picture
            image: /local/divider.png
      "suspend":
        type: vertical-stack
        cards:
        - type: horizontal-stack
          cards:
          - type: "custom:button-card"
            color_type: icon
            show_name: false
            icon: mdi:checkbox-marked-circle
            entity: sensor.power_brontosaurus
            color: var(--icon-color-green)
            tap_action:
              action: call-service
              service: script.brontosaurus_action_confirm
          - type: "custom:doublevalue-card"
            entity: sensor.brontosaurus_pending_count
            title_entity: sensor.brontosaurus_pending
            scale: 20px
          - type: "custom:button-card"
            color_type: icon
            show_name: false
            icon: mdi:cancel
            entity: sensor.power_brontosaurus
            color: var(--icon-color-red)
            tap_action:
              action: call-service
              service: script.brontosaurus_action_cancel
        - type: horizontal-stack
          cards:
          - type: picture
            image: /local/divider.png
  - type: custom:state-switch
    entity: sensor.power_brontosaurus
    states:
      "on":
        type: vertical-stack
        cards:
        - type: horizontal-stack
          cards:
          - type: "custom:bignumber-card"
            title: Drivepool Size
            scale: 15px
            entity: sensor.drivepool_size
          - type: "custom:bignumber-card"
            title: Drivepool Free
            scale: 15px
            entity: sensor.drivepool_free
          - type: "custom:bignumber-card"
            title: Uptime
            scale: 15px
            entity: sensor.brontosaurus_uptime
        - type: horizontal-stack
          cards:
          - type: picture
            image: /local/divider.png
  - type: custom:state-switch
    entity: switch.brontosaurus
    states:
      "on":
        type: vertical-stack
        cards:
        - type: horizontal-stack
          cards:
          - type: custom:compact-graph-card
            entities:
            - sensor.brontosaurus_cpu_usage
            name: CPU
            font_size: 60
            show:
              name: true
              icon: true
              state: true
            line_color: 
            - var(--icon-color-red)
            hours_to_show: 4
            points_per_hour: 60
            hour24: true
          - type: custom:compact-graph-card
            entities:
            - sensor.brontosaurus_memory_usage
            name: RAM
            font_size: 60
            show:
              name: true
              icon: true
              state: true
            line_color: 
            - var(--icon-color-green)
            hours_to_show: 4
            points_per_hour: 60
            hour24: true
          - type: custom:compact-graph-card
            name: Power
            font_size: 60
            entities:
            - entity: sensor.tp_link_brontosaurus_daily_power
              name: Power_daily
              show_state: true
              show_graph: false
              show_line: false
              show_points: false
              show_legend: false
              show_fill: false
            - entity: sensor.tp_link_brontosaurus_hourly_power
              name: Power
              show_state: false
              color: var(--icon-color-amber)
            line_color: var(--icon-color-amber)
            icon: mdi:flash
            aggregate_func: max
            group_by: hour
            show:
              graph: bar
              name: true
              icon: false
            hours_to_show: 24
            decimals: 2
            hour24: true
        - type: horizontal-stack
          cards:
          - type: picture
            image: /local/divider.png
  - type: horizontal-stack
    cards:
    - type: "custom:bignumber-card"
      title: Current Load
      scale: 15px
      entity: sensor.tp_link_brontosaurus_current_load
    - type: "custom:bignumber-card"
      title: Current Cost
      scale: 15px
      entity: sensor.tp_link_brontosaurus_current_cost
    - type: "custom:bignumber-card"
      title: Cost Today
      scale: 15px
      entity: sensor.tp_link_brontosaurus_daily_power_cost